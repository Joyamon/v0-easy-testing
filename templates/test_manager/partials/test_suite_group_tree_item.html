{% load custom_filters %}

<div class="group-item">
    <div class="d-flex align-items-center">
        <div style="width: {{ level|multiply:20 }}px;"></div>
        <div class="me-2">
            {% if group.children.exists %}
                <i class="bi bi-folder2-open text-warning"></i>
            {% else %}
                <i class="bi bi-folder text-warning"></i>
            {% endif %}
        </div>
        <div class="group-name">
            <a href="{% url 'test_suite_list' %}?project={{ group.project.id }}&group={{ group.id }}">
                {{ group.name }}
            </a>
        </div>
        <div class="ms-2">
            <span class="badge bg-primary group-badge" title="Test suites in this group">
                <i class="bi bi-collection"></i> {{ group.test_suites.count }}
            </span>
            {% if group.children.exists %}
                <span class="badge bg-secondary group-badge" title="Subgroups">
                    <i class="bi bi-folder"></i> {{ group.children.count }}
                </span>
            {% endif %}
        </div>
        <div class="ms-auto group-actions">
            <a href="{% url 'test_suite_group_create' %}?project={{ group.project.id }}&parent={{ group.id }}" class="btn btn-sm btn-outline-primary" title="Add subgroup">
                <i class="bi bi-folder-plus"></i>
            </a>
            <a href="{% url 'test_suite_create' %}?project={{ group.project.id }}&group={{ group.id }}" class="btn btn-sm btn-outline-success" title="Add test suite">
                <i class="bi bi-plus-circle"></i>
            </a>
            <a href="{% url 'test_suite_group_edit' pk=group.id %}" class="btn btn-sm btn-outline-secondary" title="Edit group">
                <i class="bi bi-pencil"></i>
            </a>
            <a href="{% url 'test_suite_group_delete' pk=group.id %}" class="btn btn-sm btn-outline-danger" title="Delete group">
                <i class="bi bi-trash"></i>
            </a>
        </div>
    </div>
</div>

{% for child in group.children.all %}
    {% include 'test_manager/partials/test_suite_group_tree_item.html' with group=child level=level|add:1 %}
{% endfor %}
